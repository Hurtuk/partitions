<div class="search-box" tabindex="0"
        (focus)="openSearch($event, searchbox)"
        (blur)="searchOpened = resultOpened">
    <input #searchbox type="text" class="input-search"
            [class.open]="searchOpened"
            (blur)="searchOpened = resultOpened"
            (focus)="searchOpened = true; resultOpened = searchField && searchField.length > 0"
            [(ngModel)]="searchField"
            (keyup)="searchTerm()" />
</div>
<div class="social-links">
    <a (click)="closeAll()" href="https://twitter.com/Louiecinephile" class="top-twitter"></a><!--
    --><a (click)="closeAll()" href="https://www.facebook.com/louiecinephile/" class="top-facebook"></a>
</div>
<h1><a routerLink="/"><img src="./assets/images/logo2.png" alt="L'Ouïe Cinéphile" /></a></h1>
<nav>
    <ul>
        @for (item of menu; track $index) {
            <li [class]="'menu-' + item.pathArg">
                <a (click)="closeAll()" [routerLink]="'/scores/' + item.pathArg">{{getBandTitle(item.title)}}</a>
                <a (click)="closeAll()" [routerLink]="'/scores/' + item.pathArg" class="invisible">{{getBandTitle(item.title)}}</a>
            </li>
        }
    </ul>
</nav>
<div class="search-results" [class.open]="resultOpened">
    <button class="close-results" (click)="resultOpened = false; searchOpened = false"></button>
    @if (searchResults && searchResults[0].length) {
        <div class="score-results" [class.full-line]="allOpen()">
            <h2>Partitions</h2>
            <div>
                @for (score of searchResults[0]; track $index) {
                    <a (click)="closeAll()" [routerLink]="'/score/' + score.tag">
                        <div class="score-title">{{score.title}}</div>
                        <div class="score-band">{{score.band.title}}</div>
                    </a>
                }
            </div>
        </div>
    }
    <div class="others">
        @if (searchResults && searchResults[1].length) {
            <div class="band-results">
                <h2>Ensembles</h2>
                <div>
                    @for (band of searchResults[1]; track $index) {
                        <a (click)="closeAll()" [routerLink]="'/scores/' + band.tag">{{band.name}} ({{band.nb}})</a>
                    }
                </div>
            </div>
        }
        @if (searchResults && searchResults[2].length) {
            <div class="instruments-results">
                <h2>Instruments</h2>
                <div>
                    @for (instrument of searchResults[2]; track $index) {
                        <a (click)="closeAll()" [routerLink]="['/scores', {instrument:instrument.instrument.instrumentTag}]">{{instrument.instrument.instrumentName}} ({{instrument.nb}})</a>
                    }
                </div>
            </div>
        }
        @if (searchResults && searchResults[3].length) {
            <div class="composer-results">
                <h2>Compositeurs</h2>
                <div>
                    @for (composer of searchResults[3]; track $index) {
                        <a (click)="closeAll()" [routerLink]="['/scores', {composer:composer.name}]">{{composer.name}} ({{composer.nb}})</a>
                    }
                </div>
            </div>
        }
        @if (searchResults && searchResults[4].length) {
            <div class="tag-results">
                <h2>Mots-clés</h2>
                <div>
                    @for (tag of searchResults[4]; track $index) {
                        <a (click)="closeAll()" [routerLink]="['/scores', {tag:tag.word}]">{{tag.word}} ({{tag.nb}})</a>
                    }
                </div>
            </div>
        }
    </div>
</div>